<!DOCTYPE html>
<html>
<head>
    <title>Employee Management System </title>

    <style>
        body {
            font-family: Arial;
            background: #f4f4f4;
            padding: 40px;
        }

        .container {
            max-width: 800px;
            margin: auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        input {
            padding: 8px;
            margin: 5px;
        }

        button {
            padding: 6px 10px;
            margin: 5px;
            cursor: pointer;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        table, th, td {
            border: 1px solid #ddd;
        }

        th, td {
            padding: 10px;
            text-align: center;
        }

        .success { color: green; }
        .error { color: red; }
    </style>
</head>

<body>

<div class="container">
    <h2>Employee Management System </h2>

    <div id="message"></div>

    <input type="text" id="empId" placeholder="Employee ID">
    <input type="text" id="empName" placeholder="Name">
    <input type="text" id="empDept" placeholder="Department">
    <input type="number" id="empSalary" placeholder="Salary">
    <button onclick="addEmployee()">Add</button>

    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Department</th>
                <th>Salary</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody id="employeeTable"></tbody>
    </table>
</div>

<script>
    let xmlDoc = null;

    
    function loadEmployees() {
        const xhr = new XMLHttpRequest();
        xhr.open("GET", "employees.xml", true);

        xhr.onload = function () {
            if (xhr.status === 200) {

                if (!xhr.responseXML) {
                    showMessage("Malformed XML file", "error");
                    return;
                }

                xmlDoc = xhr.responseXML;

                const employees = xmlDoc.getElementsByTagName("employee");

                if (employees.length === 0) {
                    showMessage("No employees found (Empty XML)", "error");
                }

                displayEmployees();
            } else {
                showMessage("Error loading XML (Status: " + xhr.status + ")", "error");
            }
        };

        xhr.onerror = function () {
            showMessage("Network error occurred", "error");
        };

        xhr.send();
    }

    function displayEmployees() {
        const table = document.getElementById("employeeTable");
        table.innerHTML = "";

        const employees = xmlDoc.getElementsByTagName("employee");

        for (let i = 0; i < employees.length; i++) {
            const id = employees[i].getElementsByTagName("id")[0].textContent;
            const name = employees[i].getElementsByTagName("name")[0].textContent;
            const dept = employees[i].getElementsByTagName("department")[0].textContent;
            const salary = employees[i].getElementsByTagName("salary")[0].textContent;

            const row = `
                <tr>
                    <td>${id}</td>
                    <td>${name}</td>
                    <td>${dept}</td>
                    <td>${salary}</td>
                    <td>
                        <button onclick="editEmployee('${id}')">Edit</button>
                        <button onclick="deleteEmployee('${id}')">Delete</button>
                    </td>
                </tr>
            `;

            table.innerHTML += row;
        }
    }

    
    function addEmployee() {
        const id = document.getElementById("empId").value;
        const name = document.getElementById("empName").value;
        const dept = document.getElementById("empDept").value;
        const salary = document.getElementById("empSalary").value;

        if (!id || !name || !dept || !salary) {
            showMessage("All fields are required", "error");
            return;
        }

        const employee = xmlDoc.createElement("employee");

        employee.appendChild(createNode("id", id));
        employee.appendChild(createNode("name", name));
        employee.appendChild(createNode("department", dept));
        employee.appendChild(createNode("salary", salary));

        xmlDoc.getElementsByTagName("employees")[0].appendChild(employee);

        displayEmployees();
        showMessage("Employee added successfully", "success");
    }

    
    function editEmployee(id) {
        const employees = xmlDoc.getElementsByTagName("employee");

        for (let i = 0; i < employees.length; i++) {
            const empId = employees[i].getElementsByTagName("id")[0].textContent;

            if (empId === id) {
                const newDept = prompt("Enter new department:");
                const newSalary = prompt("Enter new salary:");

                if (newDept)
                    employees[i].getElementsByTagName("department")[0].textContent = newDept;

                if (newSalary)
                    employees[i].getElementsByTagName("salary")[0].textContent = newSalary;

                displayEmployees();
                showMessage("Employee updated successfully", "success");
                return;
            }
        }

        showMessage("Employee not found", "error");
    }

    
    function deleteEmployee(id) {
        const employees = xmlDoc.getElementsByTagName("employee");

        for (let i = 0; i < employees.length; i++) {
            const empId = employees[i].getElementsByTagName("id")[0].textContent;

            if (empId === id) {
                employees[i].parentNode.removeChild(employees[i]);
                displayEmployees();
                showMessage("Employee deleted successfully", "success");
                return;
            }
        }

        showMessage("Employee not found", "error");
    }

    function createNode(tag, value) {
        const node = xmlDoc.createElement(tag);
        node.appendChild(xmlDoc.createTextNode(value));
        return node;
    }

    function showMessage(msg, type) {
        const messageDiv = document.getElementById("message");
        messageDiv.textContent = msg;
        messageDiv.className = type;
        setTimeout(() => messageDiv.textContent = "", 3000);
    }

    loadEmployees(); 
</script>

</body>
</html>
